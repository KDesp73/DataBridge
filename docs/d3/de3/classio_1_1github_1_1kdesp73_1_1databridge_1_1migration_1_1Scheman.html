<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DataBridge Documentation: io.github.kdesp73.databridge.migration.Scheman Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DataBridge Documentation<span id="projectnumber">&#160;2.0.17</span>
   </div>
   <div id="projectbrief">A Java library for managing database connections and transactions</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d3/de3/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Scheman.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../da/d71/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Scheman-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">io.github.kdesp73.databridge.migration.Scheman Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8deb01e9c18c329aa8ecbccd921a336d" id="r_a8deb01e9c18c329aa8ecbccd921a336d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8deb01e9c18c329aa8ecbccd921a336d">applyMigration</a> (<a class="el" href="../../d6/d13/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Migration.html">Migration</a> migration)  throws SQLException </td></tr>
<tr class="separator:a8deb01e9c18c329aa8ecbccd921a336d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d89dc8933fd9a798ab3facd92426cc9" id="r_a9d89dc8933fd9a798ab3facd92426cc9"><td class="memItemLeft" align="right" valign="top"><a id="a9d89dc8933fd9a798ab3facd92426cc9" name="a9d89dc8933fd9a798ab3facd92426cc9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>cli</b> ()</td></tr>
<tr class="separator:a9d89dc8933fd9a798ab3facd92426cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23c3a95ca32ad24bc6f2e14e4be0095" id="r_ae23c3a95ca32ad24bc6f2e14e4be0095"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae23c3a95ca32ad24bc6f2e14e4be0095">getCurrentVersion</a> ()  throws SQLException </td></tr>
<tr class="separator:ae23c3a95ca32ad24bc6f2e14e4be0095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eed37a425a76b26e990577e56256a07" id="r_a7eed37a425a76b26e990577e56256a07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7eed37a425a76b26e990577e56256a07">rerunMigrations</a> ()  throws SQLException </td></tr>
<tr class="separator:a7eed37a425a76b26e990577e56256a07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17de94acf3b59e3b93c257449442dfeb" id="r_a17de94acf3b59e3b93c257449442dfeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a17de94acf3b59e3b93c257449442dfeb">rollbackMigration</a> ()  throws SQLException </td></tr>
<tr class="separator:a17de94acf3b59e3b93c257449442dfeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d953ed281c011035db82a2616326e0" id="r_a20d953ed281c011035db82a2616326e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20d953ed281c011035db82a2616326e0">runMigrations</a> ()  throws SQLException </td></tr>
<tr class="separator:a20d953ed281c011035db82a2616326e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2acdc1f60b0db9d8d6c15ccdf73d3505" id="r_a2acdc1f60b0db9d8d6c15ccdf73d3505"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2acdc1f60b0db9d8d6c15ccdf73d3505">Scheman</a> (<a class="el" href="../../dc/d45/interfaceio_1_1github_1_1kdesp73_1_1databridge_1_1connections_1_1DatabaseConnection.html">DatabaseConnection</a> connection)</td></tr>
<tr class="separator:a2acdc1f60b0db9d8d6c15ccdf73d3505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8dd56019a7aa743f0ffe2eb59cd2d79b" id="r_a8dd56019a7aa743f0ffe2eb59cd2d79b"><td class="memItemLeft" align="right" valign="top"><a id="a8dd56019a7aa743f0ffe2eb59cd2d79b" name="a8dd56019a7aa743f0ffe2eb59cd2d79b"></a>
ResultSet&#160;</td><td class="memItemRight" valign="bottom"><b>selectMigrations</b> ()  throws SQLException </td></tr>
<tr class="separator:a8dd56019a7aa743f0ffe2eb59cd2d79b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="../../d3/de3/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Scheman.html">Scheman</a> class handles the database schema migrations. It provides methods for applying, rolling back, and verifying migrations. The class also manages the schema changelog to track the versions and checksums of the migrations applied to the database. </p>
<p>It interacts with the database through a <code><a class="el" href="">DatabaseConnection</a></code> instance and uses migration scripts stored in a designated migrations directory. </p>
<dl class="section author"><dt>Author</dt><dd>kdesp73 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2acdc1f60b0db9d8d6c15ccdf73d3505" name="a2acdc1f60b0db9d8d6c15ccdf73d3505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2acdc1f60b0db9d8d6c15ccdf73d3505">&#9670;&#160;</a></span>Scheman()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">io.github.kdesp73.databridge.migration.Scheman.Scheman </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d45/interfaceio_1_1github_1_1kdesp73_1_1databridge_1_1connections_1_1DatabaseConnection.html">DatabaseConnection</a></td>          <td class="paramname"><span class="paramname"><em>connection</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructs a new <a class="el" href="../../d3/de3/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Scheman.html">Scheman</a> instance with the provided database connection. Initializes the schema changelog and verifies the existence of the changelog table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connection</td><td>The <code><a class="el" href="">DatabaseConnection</a></code> instance used to interact with the database. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae23c3a95ca32ad24bc6f2e14e4be0095" name="ae23c3a95ca32ad24bc6f2e14e4be0095"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae23c3a95ca32ad24bc6f2e14e4be0095">&#9670;&#160;</a></span>getCurrentVersion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int io.github.kdesp73.databridge.migration.Scheman.getCurrentVersion </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the current version of the schema by querying the version from the schema changelog table.</p>
<dl class="section return"><dt>Returns</dt><dd>The current schema version. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If there is an error querying the database. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8deb01e9c18c329aa8ecbccd921a336d" name="a8deb01e9c18c329aa8ecbccd921a336d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8deb01e9c18c329aa8ecbccd921a336d">&#9670;&#160;</a></span>applyMigration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void io.github.kdesp73.databridge.migration.Scheman.applyMigration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d13/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Migration.html">Migration</a></td>          <td class="paramname"><span class="paramname"><em>migration</em></span></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Applies the given migration to the database by executing its up script and inserting a record into the schema changelog table.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">migration</td><td>The migration to be applied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If there is an error applying the migration or updating the changelog. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a17de94acf3b59e3b93c257449442dfeb" name="a17de94acf3b59e3b93c257449442dfeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17de94acf3b59e3b93c257449442dfeb">&#9670;&#160;</a></span>rollbackMigration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void io.github.kdesp73.databridge.migration.Scheman.rollbackMigration </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Rolls back the most recent migration by executing its down script and removing its record from the schema changelog table.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If there is an error during the rollback process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20d953ed281c011035db82a2616326e0" name="a20d953ed281c011035db82a2616326e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d953ed281c011035db82a2616326e0">&#9670;&#160;</a></span>runMigrations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void io.github.kdesp73.databridge.migration.Scheman.runMigrations </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs all unapplied migrations, checking for any checksum mismatches and applying migrations as needed.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If there is an error running the migrations. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7eed37a425a76b26e990577e56256a07" name="a7eed37a425a76b26e990577e56256a07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7eed37a425a76b26e990577e56256a07">&#9670;&#160;</a></span>rerunMigrations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void io.github.kdesp73.databridge.migration.Scheman.rerunMigrations </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> throws SQLException</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reapplies any migrations that have been modified after they were first applied, based on checksum mismatches.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">SQLException</td><td>If there is an error reapplying migrations. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/java/io/github/kdesp73/databridge/migration/<b>Scheman.java</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>io</b></li><li class="navelem"><b>github</b></li><li class="navelem"><b>kdesp73</b></li><li class="navelem"><b>databridge</b></li><li class="navelem"><b>migration</b></li><li class="navelem"><a class="el" href="../../d3/de3/classio_1_1github_1_1kdesp73_1_1databridge_1_1migration_1_1Scheman.html">Scheman</a></li>
    <li class="footer">Generated on Tue Dec 17 2024 22:24:09 for DataBridge Documentation by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
